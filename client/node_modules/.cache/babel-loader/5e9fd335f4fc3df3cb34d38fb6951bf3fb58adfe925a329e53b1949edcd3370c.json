{"ast":null,"code":"var _jsxFileName = \"/Users/mauriciolopez/Cargapp/client/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport ChargersList from './ChargersList';\nimport SessionsList from './SessionsList';\nimport ChargerStatusCards from './ChargerStatusCards';\nimport './index.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [chargers, setChargers] = useState([]);\n  const [sessions, setSessions] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [view, setView] = useState('chargers'); // 'chargers' | 'sessions'\n  const [filterStatus, setFilterStatus] = useState(null);\n\n  // Fetch chargers from backend every 30 seconds\n  useEffect(() => {\n    let interval;\n    const fetchChargers = async () => {\n      setLoading(true);\n      try {\n        const res = await fetch('/api/chargers');\n        const data = await res.json();\n        // Filtrar cargadores con al menos un conector de 60kW o más\n        const filteredChargers = (data.chargers || []).filter(charger => charger.cnns && charger.cnns.some(conn => conn.power >= 60));\n        setChargers(filteredChargers);\n        setError(null);\n      } catch (err) {\n        setError('Error al obtener los cargadores');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchChargers();\n    interval = setInterval(fetchChargers, 30000);\n    return () => clearInterval(interval);\n  }, []);\n\n  // Fetch sessions when switching to sessions view\n  useEffect(() => {\n    if (view === 'sessions') {\n      setLoading(true);\n      fetch('/api/sessions').then(res => res.json()).then(data => {\n        setSessions(data.sessions || []);\n        setError(null);\n      }).catch(() => setError('Error al obtener las sesiones')).finally(() => setLoading(false));\n    }\n  }, [view]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100 p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-2xl font-bold mb-6 text-center text-gray-900\",\n      children: \"EV Chargers Monitor\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center gap-4 mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `px-4 py-2 rounded font-semibold ${view === 'chargers' ? 'bg-blue-600 text-white' : 'bg-white border text-blue-600'}`,\n        onClick: () => setView('chargers'),\n        children: \"Cargadores\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `px-4 py-2 rounded font-semibold ${view === 'sessions' ? 'bg-blue-600 text-white' : 'bg-white border text-blue-600'}`,\n        onClick: () => setView('sessions'),\n        children: \"Sesiones\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center text-gray-500\",\n      children: \"Cargando...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center text-red-500\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }, this), !loading && !error && view === 'chargers' && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center gap-4 mb-2 text-gray-700\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-semibold\",\n          children: [chargers.length, \" cargadores r\\xE1pidos\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xl\",\n          children: \"\\u2022\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-semibold\",\n          children: [chargers.reduce((sum, c) => {\n            var _c$connectors;\n            return sum + (((_c$connectors = c.connectors) === null || _c$connectors === void 0 ? void 0 : _c$connectors.length) || 0);\n          }, 0), \" conectores totales\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ChargerStatusCards, {\n        chargers: chargers,\n        loading: loading,\n        selected: filterStatus,\n        onSelect: setFilterStatus\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ChargersList, {\n        chargers: filterStatus ? chargers.filter(c => filterStatus === 'Charging' ? c.connectors.some(conn => conn.state === 'Charging') : filterStatus === 'Available' ? !c.connectors.some(conn => conn.state === 'Charging') && c.connectors.some(conn => conn.state === 'Available') : !c.connectors.some(conn => conn.state === 'Charging') && !c.connectors.some(conn => conn.state === 'Available')) : chargers\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), !loading && !error && view === 'sessions' && /*#__PURE__*/_jsxDEV(SessionsList, {\n      sessions: sessions,\n      onBack: () => setView('chargers')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 53\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"MenyQPyuvXAmnxARTuwhww3qYfE=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","ChargersList","SessionsList","ChargerStatusCards","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","chargers","setChargers","sessions","setSessions","loading","setLoading","error","setError","view","setView","filterStatus","setFilterStatus","interval","fetchChargers","res","fetch","data","json","filteredChargers","filter","charger","cnns","some","conn","power","err","setInterval","clearInterval","then","catch","finally","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","length","reduce","sum","c","_c$connectors","connectors","selected","onSelect","state","onBack","_c","$RefreshReg$"],"sources":["/Users/mauriciolopez/Cargapp/client/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport ChargersList from './ChargersList';\nimport SessionsList from './SessionsList';\nimport ChargerStatusCards from './ChargerStatusCards';\nimport './index.css';\n\nfunction App() {\n  const [chargers, setChargers] = useState([]);\n  const [sessions, setSessions] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [view, setView] = useState('chargers'); // 'chargers' | 'sessions'\n  const [filterStatus, setFilterStatus] = useState(null);\n\n  // Fetch chargers from backend every 30 seconds\n  useEffect(() => {\n    let interval;\n    const fetchChargers = async () => {\n      setLoading(true);\n      try {\n        const res = await fetch('/api/chargers');\n        const data = await res.json();\n        // Filtrar cargadores con al menos un conector de 60kW o más\n        const filteredChargers = (data.chargers || []).filter(\n          charger => charger.cnns && charger.cnns.some(conn => conn.power >= 60)\n        );\n        setChargers(filteredChargers);\n        setError(null);\n      } catch (err) {\n        setError('Error al obtener los cargadores');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchChargers();\n    interval = setInterval(fetchChargers, 30000);\n    return () => clearInterval(interval);\n  }, []);\n\n  // Fetch sessions when switching to sessions view\n  useEffect(() => {\n    if (view === 'sessions') {\n      setLoading(true);\n      fetch('/api/sessions')\n        .then(res => res.json())\n        .then(data => {\n          setSessions(data.sessions || []);\n          setError(null);\n        })\n        .catch(() => setError('Error al obtener las sesiones'))\n        .finally(() => setLoading(false));\n    }\n  }, [view]);\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 p-4\">\n      <h1 className=\"text-2xl font-bold mb-6 text-center text-gray-900\">EV Chargers Monitor</h1>\n      <div className=\"flex justify-center gap-4 mb-6\">\n        <button\n          className={`px-4 py-2 rounded font-semibold ${view === 'chargers' ? 'bg-blue-600 text-white' : 'bg-white border text-blue-600'}`}\n          onClick={() => setView('chargers')}\n        >\n          Cargadores\n        </button>\n        <button\n          className={`px-4 py-2 rounded font-semibold ${view === 'sessions' ? 'bg-blue-600 text-white' : 'bg-white border text-blue-600'}`}\n          onClick={() => setView('sessions')}\n        >\n          Sesiones\n        </button>\n      </div>\n      {loading && <div className=\"text-center text-gray-500\">Cargando...</div>}\n      {error && <div className=\"text-center text-red-500\">{error}</div>}\n      {!loading && !error && view === 'chargers' && (\n        <>\n          {/* Resumen de cargadores y conectores */}\n          <div className=\"flex items-center justify-center gap-4 mb-2 text-gray-700\">\n            <span className=\"font-semibold\">\n              {chargers.length} cargadores rápidos\n            </span>\n            <span className=\"text-xl\">•</span>\n            <span className=\"font-semibold\">\n              {chargers.reduce((sum, c) => sum + (c.connectors?.length || 0), 0)} conectores totales\n            </span>\n          </div>\n          <ChargerStatusCards\n            chargers={chargers}\n            loading={loading}\n            selected={filterStatus}\n            onSelect={setFilterStatus}\n          />\n          <ChargersList chargers={filterStatus ? chargers.filter(c =>\n            filterStatus === 'Charging' ? c.connectors.some(conn => conn.state === 'Charging') :\n            filterStatus === 'Available' ? (!c.connectors.some(conn => conn.state === 'Charging') && c.connectors.some(conn => conn.state === 'Available')) :\n            (!c.connectors.some(conn => conn.state === 'Charging') && !c.connectors.some(conn => conn.state === 'Available'))\n          ) : chargers} />\n        </>\n      )}\n      {!loading && !error && view === 'sessions' && <SessionsList sessions={sessions} onBack={() => setView('chargers')} />}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}